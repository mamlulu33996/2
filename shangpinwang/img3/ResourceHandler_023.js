(function(c,a,b){a(function(){function f(){var y=a("#proId").val();var z=a("#skuno").val();var x=a("#isOutside").val();var w=a("#isDetailJump").val();a.ajax({type:"GET",url:"/ProductDetail/AjaxProductInfo",dataType:"javascript",data:{productNo:y,skuNo:z,isOutside:x,isDetailJump:w},success:function(A){if(A&&A.length>0){a("#spDetail_proInfo").html(A);q(a("#isOutside").val())}},error:function(A){}})}function q(x){if(x=="2"){var y=a("#SP_ProdPrice").val();var z=a("#proId").val();var A=a("#skuno").val();var w=a("#categoryNo").val();a.get("/ProductDetail/AjaxTariffAndFreight",{productNo:z,skuNo:A,price:y,categoryNo:w},function(B){a("#proFreight").text("￥"+B.freight);a("#proTariff").text("￥"+B.tariff)})}}function s(y){var x=a("#proId").val();var A=a("#websiteUrl").val();var z=a("#topicno").val();if(x==""||y==""||A==""){return}var w="";if(z==b||z==""){w=A+"/product/"+x+"-"+y}else{w=A+"/product/"+z+"/"+x+"-"+y}c.location.href=w}a(".spDetail_lchima li").click(function(){var y=a(this);var x=a("#spDetail_proColor");if(x&&x.length>0){var z=x.find("span[class=limg_ison]");if(z&&z.length>0){if(y.hasClass("lcm_ison")||y.hasClass("cmOver")||y.text()=="尺码测量"){return}var A=y.attr("skuno");s(A)}else{}}else{if(y.hasClass("lcm_ison")){return}if(y.text()=="尺码测量"){return false}var w=a(".spDetail_lchima");if(w&&w.length>0){s(a(this).attr("skuno"))}}});function k(){var w=a("#proId").val();a.ajax({type:"GET",url:"/ProductDetail/AjaxTmplateInfo",dataType:"html",data:{productNo:w},success:function(x){if(x&&x.length>0){a("#templateInfo").html(x)}else{a("#templateInfo").html("")}}})}function m(){var w=a("#proId").val();a.get("/ProductDetail/AjaxSaledDescTemplate",{productNo:w},function(x){if(x&&x.length>0){a("#tab3").after(x)}})}m();a(".spDetail_limg span").click(function(){var w=a(this);if(!w.hasClass("cmOver")&&!w.hasClass("limg_ison")){w.addClass("limg_ison").siblings().removeClass("limg_ison");var x=w.attr("value");o(x)}});function o(A){var C=a("#proId").val();var B=a("#skuno").val();var x=a("#spDetail_proColor");var w=a(".spDetail_lchima");if(x&&x.length>0){if(w&&w.length>0){var y=w.find("li[class=lcm_ison]");var z=y.attr("attrtext");if(y&&y.length>0){a.get("/ProductDetail/AjaxFirstAttrGroupInfo",{productNo:C,skuNo:B,firstAttr:A,secondAttrText:z},function(E){h(E)})}else{a.get("/ProductDetail/AjaxFirstAttrGroupInfo",{productNo:C,skuNo:B,firstAttr:A,secondAttrText:""},function(E){h(E)})}}else{var D=x.find("span[class=limg_ison]");s(D.attr("skuno"))}}}function h(z){if(z.success){if(z.IsFindSkuNo){s(z.SkuNo)}else{var x=z.FirstAttrGroup;var w=a(".spDetail_lchima li");w.removeClass("lcm_ison");var y=false;a(".spDetail_lchima li").each(function(B){var A=a(this);if(A.hasClass("spDetail_cm_link")){return}var F=A.attr("val");var G=A.attr("val").toLowerCase();if((a.inArray(F,x.SecondAttrTextList)>-1)||(a.inArray(G,x.SecondAttrTextList)>-1)){var C=parseInt(A.attr("quantity"));var D=n(F,x.SkuNoAndAttrTextList);if(D.Quantity>0){A.removeClass("cmOver");var E=D.SkuNo;if(E!=""){A.attr("skuno",E);A.attr("quantity",D.Quantity);if(!y){y=true;l(E)}}else{A.addClass("cmOver")}}else{A.addClass("cmOver")}}else{A.addClass("cmOver")}})}}}function n(y,x){var w={};w.SkuNo="";w.Quantity=0;a.each(x,function(z){if(this.SecondAttrValue.toLowerCase()==y.toLowerCase()){w.SkuNo=this.SkuNo;w.Quantity=this.Quantity;return false}});return w}function l(w){a.get("/ProductDetail/AjaxProductPicture",{skuNo:w},function(x){if(x&&x.length>6){a("#spDetail_proImg").html(x);SP.page.detail.zoomImg(w)}else{}})}function g(){var x=a("#proId").val();var w=-11;a.ajax({type:"GET",url:"/ProductDetail/AjaxRecommendProduct",dataType:"html",data:{productNo:x,gender:-1},success:function(y){if(y&&y.length>6){a(".spProduct_listbox").show();a(".spProduct_listbox h3").after(y);doPrice(".spProduct_listbox")}else{a(".spProduct_listbox").hide()}},error:function(y){}})}g();function d(){a.ajax({type:"GET",url:"/productdetail/browsehistory",dataType:"html",data:{productNo:a("#proId").val(),gender:a("#gender").val(),flag:a("#new").val()},success:function(w){if(w&&w!="\r\n"&&w.length>6){a("#browseH").html(w);a("#spDetail_pordList").show();doPrice(".spDetail_pordList")}else{a("#spDetail_pordList").hide()}},error:function(w){}})}d();function e(){var A=a("#proId").val();var w=a("#attrTemplateId").val();var C=a("#templateNo").val();var B=a("#sizeTmpNo").val();var z=a("#isShowSize").val();var y=a("#defaultItemValueId").val();var x=a("#categoryNo").val();a.ajax({type:"GET",url:"/ProductDetail/AjaxProductIndexAndSize",dataType:"html",data:{productNo:A,categoryNo:x,footageTmpItemValueId:y,attrTemplateId:w,templateNo:C,sizeTmpNo:B,isShowSize:z},success:function(D){if(D&&D.length>6){a("#tab1").after(D);u();a(".size_table tr:even").addClass("bg_gray");a(".size_table tr td[class=title]").parent("tr").removeClass("bg_gray");t();v()}i()},error:function(D){}})}e();function i(){var y=true;if(!a("#isHasSizeTableDesc")||a("#isHasSizeTableDesc").val()!="1"){y=false}var z=a("#sizeInfo")&&a("#sizeInfo").length>0;var B=a("#spDetail_tbox li:[tabs=tab1]");if(!z){if(B&&B.length>0){if(!y){B.hide();return}}}else{var A=a("#sizeDetail");var x=a(".detail_size");var w=a(".detail_img");if(A.length==0&&x.length==0&&w.length==0){if(B&&B.length>0){if(!y){B.hide();a("#sizeInfo").hide()}}}}}a(".question_eight a").on("click",function(){a("#after-sale").click()});function u(){var x=new Array();var w=a("#sizeDetail");if(w&&w.length>0){a("#sizeDetail tr").each(function(y){var z=a(this).find("td[isoriginsize]").text();if(z&&z.length>0){if(a.inArray(z,x)>-1){a(this).remove()}else{x.push(z)}}})}}function v(){var y=new Array();var w=a("#sizeDetail tr");if(w&&w.length>0){w.each(function(D,E){if(D!==0){y.push(a(this.cells[0]).text())}})}var z=0;var A="";var B="";var x=a("#sizeDetail");if(x&&x.length>0){var C=j(y);C.sort(function(D,E){return p(D)>p(E)?1:-1});A+="<tr>"+x.find("tr:first").html()+"</tr>";a.each(C,function(F,E){for(var D=0;D<x.find("tr").length-1;D++){var G=x.find("tr:eq("+(D+1)+") td:eq("+z+") ");if(G&&G.length>0&&G.text()==E){B+="<tr>"+a(G).parent("tr").html()+"</tr>"}}});if(B!=""){x.html(A+B)}}}function j(w){var A=[],y={},z=w.length;for(var x=0;x<z;x++){var B=w[x];if(!y[B]){y[B]=1;A.push(B)}}return A}function p(w){switch(w){case"XXS":sortValue=1;break;case"XS":sortValue=2;break;case"S":sortValue=3;break;case"M":sortValue=4;break;case"L":sortValue=5;break;case"XL":sortValue=6;break;case"XXL":sortValue=7;break;case"3XL":case"XXXL":case"xxxl":sortValue=8;break;default:if(isNaN(parseInt(w))){sortValue=w}else{sortValue=parseInt(w)}break}return sortValue}function t(){var x=a("#sizeDetail tr");if(x&&x.length>0){if(x.length<=1){a("#sizeDetail").remove()}var z=x.eq(0).find("td").length;var D=x.length;var A=new Array();for(var y=0;y<z;y++){var B=false;for(var C=1;C<D;C++){var w=x.eq(C).find("td:eq("+y+")");if(w&&w.length>0){if(w.text().length>0){B=true;break}}}if(!B){A.push(y)}}for(var y=0;y<z;y++){if(a.inArray(y,A)>-1){for(var C=0;C<D;C++){var w=x.eq(C).find("td:eq("+y+")");if(w&&w.length>0){w.hide()}}}}if(x.eq(0).find("td:visible").length<=1){a("#sizeDetail").remove()}}}var r=null;a(".js-epMenuTitle").hover(function(){clearTimeout(r);a(".js-epMenuTitle i").removeClass("arrow-down").addClass("arrow-up");a(".menu-nav-show").stop(true,true).slideDown()},function(){r=setTimeout(function(){a(".menu-nav-show").stop(true,true).slideUp();a(".ep-menu-sub").hide()},50);a(".js-epMenuTitle i").removeClass("arrow-up").addClass("arrow-down")});a(".menu-nav-show").hover(function(){clearTimeout(r);a(".js-epMenuTitle i").removeClass("arrow-down").addClass("arrow-up");a(".menu-nav-show").stop(true,true).slideDown()},function(){r=setTimeout(function(){a(".menu-nav-show").stop(true,true).slideUp();a(".ep-menu-sub").hide()},50);a(".js-epMenuTitle i").removeClass("arrow-up").addClass("arrow-down")});a(".menu-nav-container .j_epMenuNav").hover(function(){a(this).addClass("hover");a(this).find(".ep-menu-sub").stop(true,true).delay(100).fadeIn();clearTimeout(r);a(".js-epMenuTitle i").removeClass("arrow-down").addClass("arrow-up");a(".menu-nav-show").show()},function(){r=setTimeout(function(){a(this).hide()},50);a(".js-epMenuTitle i").removeClass("arrow-up").addClass("arrow-down");a(this).removeClass("hover");a(this).find(".ep-menu-sub").stop(true,true).fadeOut(100)})})})(window,jQuery);