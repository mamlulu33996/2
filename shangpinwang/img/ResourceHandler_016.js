(function(d,a,b){var c=(function(){var g=function(j){return j instanceof a?j:(function(){var k=a(j);return k.length==0?null:k})()},i=function(k,j){this.last(k);this.current(j)},f={wrapper:null,contentWrapper:null,first:null,trigger:"click",effector:"direct",curClass:"cur",onchange:null,auto:false,autotime:3000},e={direct:function(){var k=this.last(),j=this.current();this.getContent(k).stop(true).hide();this.getContent(j).show()},fade:function(){var k=this.last(),j=this.current();this.getContent(k).stop(true).hide();this.getContent(j).fadeIn(200)}},h=function(n){var j=a.extend({},f,n),l=null,k=null,m=j.onchange;this.getSetting=function(){return a.extend({},j,true)};this.last=function(o){if(typeof o!=="undefined"){l=o}return l};this.current=function(o){if(typeof o!=="undefined"){k=o}return k};this.onchange=function(o){if(Object.prototype.toString.call(o)==="Function"){m=o}return m};this.init()};h.prototype={constructor:h,init:function(){var r=this.getSetting(),y=g(r.wrapper),l=g(r.contentWrapper),x=r.trigger,q=r.onchange,v=this,u=y.find("*[tabid]"),n,t=u.length,o=r.auto,w=null,p=0;this.wrapper=function(){return y};this.contentWrapper=function(){return l};if(t>0&&y!=null){n=r.first||u.eq(0).attr("tabid");v.change(n);y.delegate("[tabid]",x,function(){var z=a(this),s=z.attr("tabid"),k=l.find("[tabcontent='"+s+"']");v.change(s);p=z.index();if(z.attr("rel")&&k.attr("changed")!="true"){j(k,z)}});var j=function(k,z){var s=k;var A=z.attr("rel");if(A){a.ajax({url:A,cache:false,success:function(B){s.html(B);s.attr("changed","true")},error:function(){s.html("数据加载错误，请重试！")}})}};if(o){var m=function(){alert("");var k=u.eq(p).attr("tabid"),s=y.find("[tabid='"+k+"']");$conWrp=l.find("[tabcontent='"+k+"']");v.change(k);if(s.attr("rel")&&$conWrp.attr("changed")!="true"){j($conWrp,s)}p++;if(p==t){p=0}};w=setInterval(m,r.autotime);a(l).hover(function(){clearInterval(w)},function(){w=setInterval(m,r.autotime)})}}},change:function(n){var p=this.getSetting(),j=p.contentWrapper,o=this.onchange(),l=this.current(),m,k=p.curClass;if(l!==n){m=p.effector;this.getIndexer(n).addClass(k).siblings().removeClass(k);i.call(this,l,n);o&&o.call(this);if(typeof m=="string"&&typeof e[m]!="undefined"){e[m].call(this)}else{if(a.isFunction(m)){m.call(this)}}}},getIndexer:function(j){return this.wrapper().find("[tabid='"+j+"']")},getContent:function(j){return this.contentWrapper().find("[tabcontent='"+j+"']")}};return h})();b.plug.tab={create:function(e){return new c(e)}}})(window,jQuery,SP,undefined);