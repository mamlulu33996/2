$.fn.extend({mousewheel:function(a){return this.each(function(){var b=this;b.D=0;if($.browser.msie||$.browser.safari){b.onmousewheel=function(){b.D=event.wheelDelta;event.returnValue=false;a&&a.call(b)}}else{b.addEventListener("DOMMouseScroll",function(c){b.D=c.detail>0?-1:1;c.preventDefault();a&&a.call(b)},false)}})}});$.fn.extend({jscroll:function(a){return this.each(function(){a=a||{};a.Bar=a.Bar||{};a.Btn=a.Btn||{};a.Bar.Bg=a.Bar.Bg||{};a.Bar.Bd=a.Bar.Bd||{};a.Btn.uBg=a.Btn.uBg||{};a.Btn.dBg=a.Btn.dBg||{};var o={W:"15px",BgUrl:"",Bg:"#efefef",Bar:{Pos:"up",Bd:{Out:"#b5b5b5",Hover:"#ccc"},Bg:{Out:"#fff",Hover:"#fff",Focus:"#b6b5b5"}},Btn:{btn:true,uBg:{Out:"#ccc",Hover:"#b6b5b5",Focus:"orange"},dBg:{Out:"#ccc",Hover:"#b6b5b5",Focus:"orange"}},Fn:function(){}};a.W=a.W||o.W;a.BgUrl=a.BgUrl||o.BgUrl;a.Bg=a.Bg||o.Bg;a.Bar.Pos=a.Bar.Pos||o.Bar.Pos;a.Bar.Bd.Out=a.Bar.Bd.Out||o.Bar.Bd.Out;a.Bar.Bd.Hover=a.Bar.Bd.Hover||o.Bar.Bd.Hover;a.Bar.Bg.Out=a.Bar.Bg.Out||o.Bar.Bg.Out;a.Bar.Bg.Hover=a.Bar.Bg.Hover||o.Bar.Bg.Hover;a.Bar.Bg.Focus=a.Bar.Bg.Focus||o.Bar.Bg.Focus;a.Btn.btn=a.Btn.btn!=undefined?a.Btn.btn:o.Btn.btn;a.Btn.uBg.Out=a.Btn.uBg.Out||o.Btn.uBg.Out;a.Btn.uBg.Hover=a.Btn.uBg.Hover||o.Btn.uBg.Hover;a.Btn.uBg.Focus=a.Btn.uBg.Focus||o.Btn.uBg.Focus;a.Btn.dBg.Out=a.Btn.dBg.Out||o.Btn.dBg.Out;a.Btn.dBg.Hover=a.Btn.dBg.Hover||o.Btn.dBg.Hover;a.Btn.dBg.Focus=a.Btn.dBg.Focus||o.Btn.dBg.Focus;a.Fn=a.Fn||o.Fn;var b=this;var u,t=0,i=0;$(b).css({overflow:"hidden",position:"relative",padding:"0px"});var h=$(b).width(),g=$(b).height()-1;var v=a.W?parseInt(a.W):21;var s=h-v;var e=a.Btn.btn==true?v:0;if($(b).children(".jscroll-c").height()==null){$(b).wrapInner("<div class='jscroll-c' style='top:0px;z-index:9999;zoom:1;position:relative'></div>");$(b).children(".jscroll-c").prepend("<div style='height:0px;overflow:hidden'></div>");$(b).append("<div class='jscroll-e' unselectable='on' style=' height:100%;top:0px;right:0;-moz-user-select:none;position:absolute;overflow:hidden;z-index:10000;'><div class='jscroll-u' style='position:absolute;top:0px;width:100%;left:0;background:blue;overflow:hidden'></div><div class='jscroll-h'  unselectable='on' style='background:green;position:absolute;left:0;-moz-user-select:none;border:1px solid'></div><div class='jscroll-d' style='position:absolute;bottom:0px;width:100%;left:0;background:blue;overflow:hidden'></div></div>")}var j=$(b).children(".jscroll-c");var l=$(b).children(".jscroll-e");var m=l.children(".jscroll-h");var n=l.children(".jscroll-u");var k=l.children(".jscroll-d");if($.browser.msie){document.execCommand("BackgroundImageCache",false,true)}j.css({"padding-right":v});l.css({width:v,background:a.Bg,"background-image":a.BgUrl});m.css({top:e,background:a.Bar.Bg.Out,"background-image":a.BgUrl,"border-color":a.Bar.Bd.Out,width:v-2});n.css({height:e,background:a.Btn.uBg.Out,"background-image":a.BgUrl});k.css({height:e,background:a.Btn.dBg.Out,"background-image":a.BgUrl});m.hover(function(){if(i==0){$(this).css({background:a.Bar.Bg.Hover,"background-image":a.BgUrl,"border-color":a.Bar.Bd.Hover})}},function(){if(i==0){$(this).css({background:a.Bar.Bg.Out,"background-image":a.BgUrl,"border-color":a.Bar.Bd.Out})}});n.hover(function(){if(i==0){$(this).css({background:a.Btn.uBg.Hover,"background-image":a.BgUrl})}},function(){if(i==0){$(this).css({background:a.Btn.uBg.Out,"background-image":a.BgUrl})}});k.hover(function(){if(i==0){$(this).css({background:a.Btn.dBg.Hover,"background-image":a.BgUrl})}},function(){if(i==0){$(this).css({background:a.Btn.dBg.Out,"background-image":a.BgUrl})}});var p=j.height();var r=(g-2*e)*g/p;if(r<10){r=10}var w=r/6;var f=0,c=false;m.height(r);if(p<=g){j.css({padding:0});l.css({display:"none"})}else{c=true}if(a.Bar.Pos!="up"){f=g-r-e;q()}m.bind("mousedown",function(x){a.Fn&&a.Fn.call(b);i=1;m.css({background:a.Bar.Bg.Focus,"background-image":a.BgUrl});var y=x.pageY,z=parseInt($(this).css("top"));$(document).mousemove(function(A){f=z+A.pageY-y;q()});$(document).mouseup(function(){i=0;m.css({background:a.Bar.Bg.Out,"background-image":a.BgUrl,"border-color":a.Bar.Bd.Out});$(document).unbind()});return false});n.bind("mousedown",function(x){a.Fn&&a.Fn.call(b);i=1;n.css({background:a.Btn.uBg.Focus,"background-image":a.BgUrl});b.timeSetT("u");$(document).mouseup(function(){i=0;n.css({background:a.Btn.uBg.Out,"background-image":a.BgUrl});$(document).unbind();clearTimeout(u);t=0});return false});k.bind("mousedown",function(x){a.Fn&&a.Fn.call(b);i=1;k.css({background:a.Btn.dBg.Focus,"background-image":a.BgUrl});b.timeSetT("d");$(document).mouseup(function(){i=0;k.css({background:a.Btn.dBg.Out,"background-image":a.BgUrl});$(document).unbind();clearTimeout(u);t=0});return false});b.timeSetT=function(x){var y=this;if(x=="u"){f-=w}else{f+=w}q();t+=2;var z=500-t*50;if(z<=0){z=0}u=setTimeout(function(){y.timeSetT(x)},z)};l.bind("mousedown",function(x){a.Fn&&a.Fn.call(b);f=f+x.pageY-m.offset().top-r/2;d();return false});function d(){if(f<e){f=e}if(f>g-r-e){f=g-r-e}m.stop().animate({top:f},100);var x=-((f-e)*p/(g-2*e));j.stop().animate({top:x},1000)}function q(){if(f<e){f=e}if(f>g-r-e){f=g-r-e}m.css({top:f});var x=-((f-e)*p/(g-2*e));j.css({top:x})}$(b).mousewheel(function(){if(c!=true){return}a.Fn&&a.Fn.call(b);if(this.D>0){f-=w}else{f+=w}q()})})}});