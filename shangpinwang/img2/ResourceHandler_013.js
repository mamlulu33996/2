var cookieSettings=[{source:"baidupinzhuan",level:100,expires:30},{source:"baidusem",level:100,expires:30},{source:"baidudsp",level:100,expires:30},{source:"gdt",level:100,expires:30},{source:"zht",level:100,expires:30},{source:"toutiao",level:100,expires:30},{source:"weixin",level:100,expires:30},{source:"weibo",level:100,expires:30},{source:"bd",level:100,expires:30},{source:"lkt",level:100,expires:30},{source:"yqf",level:100,expires:30},{source:"yb",level:100,expires:30},{source:"fst",level:100,expires:30},{source:"iqiyi",level:100,expires:30},{source:"lktwap",level:100,expires:30},{source:"yqfwap",level:100,expires:30},{source:"baidusemwap",level:100,expires:30},{source:"gdtwap",level:100,expires:30},{source:"zhtwap",level:100,expires:30},{source:"toutiaowap",level:100,expires:30},{source:"mls",level:100,expires:15},{source:"mlswap",level:100,expires:15},{source:"ybwap",level:100,expires:30},{source:"smzdm",level:100,expires:15},{source:"smzdmwap",level:100,expires:15},{source:"hsm",level:100,expires:15},{source:"hsmwap",level:100,expires:15},{source:"spwbwap",level:100,expires:30},{source:"spwxwap",level:100,expires:30},{source:"kol",level:100,expires:30},{source:"kolwap",level:100,expires:30},{source:"hfive",level:100,expires:30},{source:"hfivewap",level:100,expires:30},{source:"fst",level:100,expires:30},{source:"fstwap",level:100,expires:30},{source:"grazia",level:100,expires:30},{source:"graziawap",level:100,expires:30},{source:"cosmo",level:100,expires:30},{source:"cosmowap",level:100,expires:30},{source:"vogue",level:100,expires:30},{source:"voguewap",level:100,expires:30},{source:"souhuhs",level:100,expires:30},{source:"star",level:100,expires:30},{source:"unknown",level:-1,expires:14}];var Cookie_Source="Source";var Cookie_Campaign="Campaign";var Cookie_Param="Param";var Cookie_Buid="Buid";var Key_Source="WM_Source";var Key_Campaign="WM_Campaign";var Key_Param="WM_Param";function getCookieSettingBySource(c){var a=$.grep(cookieSettings,function(e,d){return e.source==c});if(a!=null&&a.length>0){return a[0]}else{var b={source:"unknown",level:-1,expires:14};return b}}function getUrlParam(a){var c=new RegExp("(^|&)"+a+"=([^&]*)(&|$)");var b=window.location.search.substr(1).match(c);if(b!=null){return unescape(b[2])}return null}function getCookie(b){var a,c=new RegExp("(^| )"+b+"=([^;]*)(;|$)");if(a=document.cookie.match(c)){return unescape(a[2])}else{return null}}function setCookie(c,d,b){var a=new Date();a.setTime(a.getTime()+b*24*60*60*1000);document.cookie=c+"="+escape(d)+";expires="+a.toGMTString()+";domain=.shangpin.com"}function refreshCookies(){var g=getUrlParam(Cookie_Source);var e=getUrlParam(Cookie_Campaign);var f=getUrlParam(Cookie_Param);var d=getUrlParam(Cookie_Buid);if(d!=null&&d!=""){f=d+"|"+f}if(g==null||e==null||g==""||e==""){return false}var a=getCookieSettingBySource(g);if(a==null){return false}var c=getCookie(Key_Source);if(c==null||c==""){ajaxSetCookie(g,e,f,a.expires);console.log("last cookie does not exist, it will be added a new cookie value!");return true}var b=getCookieSettingBySource(c);if(b==null){return false}if(a.level>=b.level){ajaxSetCookie(g,e,f,a.expires);console.log("last cookie's level was less than the new level. It will be replaced a new value!");return true}}function ajaxSetCookie(k,a,j,g){var e=".shangpin.com";var f=".shangpin.com.hk";var i=document.location.host;var b=$("#NewShangpinDomainUrl").val();var h=$("#NewOverSeasSiteUrl").val();if(i.indexOf(e)>-1){var d={domain:".shangpin.com",Source:k,Campaign:a,Param:j,Expires:g};$.ajax({url:b+"/HomePage/SetCookie",type:"POST",dataType:"JSON",data:d});var c={domain:".shangpin.com.hk",Source:k,Campaign:a,Param:j,Expires:g};$.ajax({url:h+"/HomePage/SetCookie",type:"POST",dataType:"JSONP",data:c})}if(i.indexOf(f)>-1){var d={domain:".shangpin.com.hk",Source:k,Campaign:a,Param:j,Expires:g};$.ajax({url:h+"/HomePage/SetCookie",type:"POST",dataType:"JSON",data:d});var c={domain:".shangpin.com",Source:k,Campaign:a,Param:j,Expires:g};$.ajax({url:b+"/HomePage/SetCookie",type:"POST",dataType:"JSONP",data:c})}}$(function(){var a=refreshCookies()});